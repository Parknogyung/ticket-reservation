# [Portfolio] 대규모 트래픽 처리를 위한 분산 티켓팅 시스템
> **"1,000명이 동시에 0.1초 만에 접속해도, 결코 오버부킹(Overbooking)은 발생하지 않습니다."**

---

## 1. 프로젝트 소개
인기 콘서트 예매와 같은 **대량의 트래픽이 집중되는 환경**에서 시스템의 안정성과 데이터 무결성을 보장하기 위해 설계된 **분산 처리 티켓팅 시스템**입니다. 
단순한 기능 구현을 넘어, **동시성 제어**와 **시스템 성능 최적화**를 기술적으로 해결하는 데 중점을 두었습니다.

---

## 2. 핵심 기술 스택
| 구분 | 기술 스택 |
| :--- | :--- |
| **Language** | Java 21 (Virtual Threads 적용) |
| **Framework** | Spring Boot 3.3.5 |
| **Communication** | gRPC (Protobuf) |
| **Database** | MariaDB, Redis |
| **Concurrency** | Redisson (Distributed Lock), Atomic Operations |
| **Infrastructure** | Docker, Docker Compose, ELK Stack (Logstash, Elasticsearch) |

---

## 3. 핵심 문제 해결 (Technical Challenges)

### 3.1. 100% 중복 예약 방지 (Distributed Lock)
- **문제점**: 분산 서버 환경에서 여러 사용자가 동시에 동일한 좌석을 예약할 때 레이스 컨디션 발생.
- **해결 방안**: `Redisson`을 이용한 **분산 락(Distributed Lock)** 적용. 
- **결과**: 좌석 ID를 기반으로 락을 획득한 요청만 DB에 접근하도록 제한하여 오버부킹 발생 확률을 0%로 유지.

### 3.2. Java 21 가상 스레드(Virtual Threads) 도입
- **문제점**: 기존 플랫폼 스레드는 생성 비용이 크고 I/O 블로킹 시 자원 낭비가 심함.
- **해결 방안**: 가상 스레드 기반의 요청 처리 모델을 적용하여 블로킹 구간에서의 리소스 효율 극대화.
- **결과**: 적은 하드웨어 리소스로도 높은 처리량(Throughput)을 달성.

### 3.3. Redis 기반 대기열 시스템
- **문제점**: 순간적인 트래픽 폭주 시 서버 애플리케이션 및 DB 부하 급증.
- **해결 방안**: Redis `Sorted Set`을 활용하여 진입 순번을 관리하는 대기열 알고리즘 구현.
- **결과**: 서버 가용량에 맞춘 순차적 진입을 유도하여 전체 시스템 안정성 확보.

---

## 4. 시스템 아키텍처 (MSA)
본 프로젝트는 확장성을 고려하여 4개의 핵심 서비스로 분리되어 있습니다.

1.  **Auth Service**: Spring Security & JWT를 이용한 중앙 집중형 인증 시스템.
2.  **Ticket Server**: gRPC 기반의 고성능 비즈니스 로직 처리 (좌석 관리, 예약).
3.  **Payment Service**: 외부 결제 API와의 연동을 시뮬레이션하고 예약 상태를 확정.
4.  **Monitor Service**: ELK 스택과 연동하여 분산 로그 및 시스템 메트릭 수집.

---

## 5. UI/UX 디자인 (Web Interface)

### 5.1. 실시간 좌석 선택 대시보드
- 사용자는 콘서트 목록에서 공연을 선택하고, **실시간 좌석 상태**를 확인할 수 있습니다.
- 예약된 좌석은 실시간으로 비활성화되며, 사용자에게 즉각적인 피드백을 제공합니다.

### 5.2. 예매 및 결제 흐름
- 대기열 통과 -> 공연 선택 -> 좌석 점유 (임시) -> 결제 진행 -> 예약 완료 순의 매끄러운 사용자 경험을 제공합니다.

---

## 6. 성과 및 배운 점
- **gRPC와 Protobuf**를 실무에 적용하며 데이터 직렬화 효율과 서비스 간 통신 성능 향상을 경험했습니다.
- **분산 환경에서의 동시성 이슈**를 깊이 있게 분석하고, 상황에 맞는 락 전략(낙관적 락 vs 분산 락)을 선택하는 능력을 길렀습니다.
- **Virtual Threads**의 내부 동작 원리를 이해하고 실제 고부하 환경에서의 성능 이점을 확인했습니다.
